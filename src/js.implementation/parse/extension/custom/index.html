<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Title of the document</title>
    <script src="../../../../../node_modules/asciidoctor.js/dist/asciidoctor.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/es6-promise/4.1.1/es6-promise.auto.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/1.0.0/fetch.min.js"></script>

    <link rel="stylesheet" type="text/css" href="../../../../../node_modules/asciidoctor.js/dist/css/asciidoctor.css">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
    <script>
        function convert() {
            var asciidoctor = Asciidoctor();

            asciidoctor.Extensions.register(function () {
                this.inlineMacro(function () {
                    const self = this;
                    self.named('action');

                    self.process(function (parent, target, properties) {

                        //todo with help target (which is equal to action id) and properties we can create and save IDE action

                        var actionBtnText = Opal.hash_get(properties, "label");

                        //return html action button content
                        return "<input type=\"button\" class=\"quick-guide-action\" value=\"" + actionBtnText + "\"/>";
                    });
                });
            });

            fetch('/static/sample.adoc', {method: 'GET'}).then(function (res) {
                res.text().then(function (text) {
                    var begin = new Date().getTime();

                    const html = asciidoctor.convert(text);

                    var timeDiff = new Date().getTime() - begin;

                    console.log(timeDiff);


                    document.getElementById("content").innerHTML = html;
                });
            });
        }
    </script>
</head>
<body onload="convert();">
    <div id="content"></div>
</body>
</html>